def index(org):
    menu_str = ""  # 빈 문자열
    st = ["_" for _ in range(16)]  # 16개의 밑줄 문자열을 가지는 리스트 st를 생성

    for i in range(16):
        res = (org >> (4 * i)) & 0xF

        if 0 < res < 12:
            if (~res & 0xF) == 0x4:
                st[15 - i] = "_"
            else:
                st[15 - i] = str(res)
        else:
            st[15 - i] = format(res, "x")

    menu_str = "".join(st)
    return menu_str


def reverse_menu(menu_str):
    org = 0
    a = 15
    for c in menu_str:
        if c == "_":
            res = 11
            org = (res << (4 * a)) | org
        elif c in ["c", "e", "f"]:
            res = int(c, base=16)
            org = (res << (4 * a)) | org
        else:
            res = int(c)
            org = (res << (4 * a)) | org
        a = a - 1
    return org


if __name__ == "__main__":
    menu_str = "1_c_3_c_0__ff_3e"
    rev_str = reverse_menu(menu_str)
    print("Reverse:", rev_str)
    print("Original:", index(rev_str))
